{"transformerGVQ": {

	"transformationDescription": {
		
		"namespaceMappings": {
			"mapping": [
				{"prefix": "gmd", "namespace": "http://www.isotc211.org/2005/gmd"},
				{"prefix": "gvq", "namespace": "http://www.geoviqua.org/QualityInformationModel/3.1"},
				{"prefix": "gmd19157", "namespace": "http://www.geoviqua.org/gmd19157"}
			]
		},

		"facetDescriptions": {
			
			"producerComments": {
				"availabilityPath": "boolean(normalize-space(string(//*[local-name()='dataQualityInfo']//*[local-name()='GVQ_DiscoveredIssue']/*[local-name()='knownProblem'])))",
				"hoverover": {
					"facetName": "Producer Comments",
					"template": "Supplemental information: %s. %sKnown problems: %s.",
					"supplementalInformation": "",
					"knownProblemsPath": "normalize-space(string(//*[local-name()='dataQualityInfo']//*[local-name()='GVQ_DiscoveredIssue']/*[local-name()='knownProblem']))"
				},
				"drilldown": {
					"url": "http://www.geolabel.net/api/v1/drilldown?metadata=%s&facet=producer_comments"
				}
			},
			
			"qualityInformation": {
				"availabilityPath": "boolean(normalize-space(string(//*[local-name()='dataQualityInfo']/*[local-name()='GVQ_DataQuality']/*[local-name()='report']/*[not(self::GVQ_Traceability)] | //*[local-name()='dataQualityInfo']/*[local-name()='GVQ_DataQuality']//*[local-name()='GVQ_DiscoveredIssue'] | //*[local-name()='dataQualityInfo']/*[local-name()='DQ_DataQuality']/*[local-name()='report'])))",
				"hoverover": {
					"facetName": "Quality Information",
					"template": "Quality information scope: %s",
					"scopeLevelPath": "normalize-space(string(//*[local-name()='dataQualityInfo']/*[local-name()='GVQ_DataQuality']/*[local-name()='scope']//*[local-name()='MD_ScopeCode']/@codeListValue))"
				},
				"drilldown": {
					"url": "http://www.geolabel.net/api/v1/drilldown?metadata=%s&facet=quality_information"
				}
			},
			
			"userFeedback": {
				"availabilityPath": "boolean(sum(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='feedbackItemsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='1' or text()='2' or text()='3']]/*[local-name()='count']))",
				
				"hoverover": {
					"facetName": "User Feedback",
					"template": "Number of feedbacks: %d. Average rating: %d (%d ratings).",
					"feedbacksCountPath": "sum(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='feedbackItemsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='1' or text()='2' or text()='3']]/*[local-name()='count'])",
					"ratingsCountPath": "sum(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='userRatingsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='1' or text()='2' or text()='3']]/*[local-name()='count'])",
					
					"averageRating": {
						"level1RawTotalPath": "number(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='userRatingsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='1']]/*[local-name()='count'] * //../../*[local-name()='category'][*[local-name()='value'][text()='1']]/*[local-name()='average'])",
						"level2RawTotalPath": "number(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='userRatingsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='2']]/*[local-name()='count'] * //../../*[local-name()='category'][*[local-name()='value'][text()='2']]/*[local-name()='average'])",
						"level3RawTotalPath": "number(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='userRatingsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='3']]/*[local-name()='count'] * //../../*[local-name()='category'][*[local-name()='value'][text()='3']]/*[local-name()='average'])"
					}
				},
				"drilldown": {
					"url": "http://www.geolabel.net/api/v1/drilldown?metadata=%s&facet=user_feedback"
				}
			},
			
			"expertReview": {
				"availabilityPath": "boolean(sum(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='feedbackItemsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='4' or text()='5']]/*[local-name()='count']))",
				
				"hoverover": {
					"facetName": "Expert Review",
					"template": "Number of reviews: %d. Average rating: %d (%d ratings).",
					"reviewsCountPath": "sum(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='feedbackItemsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='4' or text()='5']]/*[local-name()='count'])",
					"ratingsCountPath": "sum(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='userRatingsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='4' or text()='5']]/*[local-name()='count'])",
					
					"averageRating": {
						"level4RawTotalPath": "number(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='userRatingsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='4']]/*[local-name()='count'] * //../../*[local-name()='category'][*[local-name()='value'][text()='4']]/*[local-name()='average'])",
						"level5RawTotalPath": "number(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='userRatingsByExpertiseLevel']/*[local-name()='category'][*[local-name()='value'][text()='5']]/*[local-name()='count'] * //../../*[local-name()='category'][*[local-name()='value'][text()='5']]/*[local-name()='average'])"
					}
				},
				"drilldown": {
					"url": "http://www.geolabel.net/api/v1/drilldown?metadata=%s&facet=expert_review"
				}
			},
			
			"citations": {
				"availabilityPath": "boolean(number(count(//*[local-name()='identificationInfo']/*[local-name()='GVQ_DataIdentification']/*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication'] | //*[local-name()='identificationInfo']/*[local-name()='MD_DataIdentification']/*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication'] | //*[local-name()='dataQualityInfo']/*[local-name()='GVQ_DataQuality']/*[local-name()='report']//*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication'] | //*[local-name()='discoveredIssue']/*[local-name()='GVQ_DiscoveredIssue']//*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication'])) + number(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='numberOfPublications']))",
				"hoverover": {
					"facetName": "Citations Information",
					"template": "Number of citations: %d.",
					"citationsCountPath": "number(number(count(//*[local-name()='identificationInfo']/*[local-name()='GVQ_DataIdentification']/*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication'] | //*[local-name()='identificationInfo']/*[local-name()='MD_DataIdentification']/*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication'] | //*[local-name()='dataQualityInfo']/*[local-name()='GVQ_DataQuality']/*[local-name()='report']//*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication'] | //*[local-name()='discoveredIssue']/*[local-name()='GVQ_DiscoveredIssue']//*[local-name()='referenceDoc']/*[local-name()='GVQ_Publication']))  + number(//*[local-name()='GVQ_FeedbackCollection']/*[local-name()='summary']/*[local-name()='numberOfPublications']))"
				},
				"drilldown": {
					"url": "http://www.geolabel.net/api/v1/drilldown?metadata=%s&facet=citations"
				}
			}
		}
	}}
}